<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hybrid Learning Facilitation Strategy Cards - Export Tool</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --visibility-color: #E91E63;
            --engagement-color: #FF9800;
            --technical-color: #2196F3;
            --essential-color: #4DB6AC;
            --enhanced-color: #26A69A;
            --transformative-color: #00695C;
            --border-color: #ddd;
            --light-gray: #f5f5f5;
            --dark-gray: #333;
            --medium-gray: #666;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.4;
            color: #333;
            background-color: #f9f9f9;
            padding: 20px;
        }

        /* Control Panel */
        .controls {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        .controls h1 {
            margin-bottom: 20px;
            color: #333;
        }

        .view-controls {
            display: flex;
            gap: 20px;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            align-items: center;
            flex-wrap: wrap;
        }

        .filter-select {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            background: white;
            font-size: 14px;
            min-width: 200px;
        }

        .filter-label {
            font-weight: 500;
            color: var(--dark-gray);
        }

        .view-toggle {
            display: flex;
            background: #f0f0f0;
            border-radius: 25px;
            padding: 4px;
        }

        .toggle-btn {
            padding: 8px 20px;
            border: none;
            background: transparent;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .toggle-btn.active {
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .export-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .export-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .export-summary {
            background: var(--visibility-color);
            color: white;
        }

        .export-detail {
            background: var(--engagement-color);
            color: white;
        }

        .export-both {
            background: var(--technical-color);
            color: white;
        }

        /* Card Display Area */
        .cards-container {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
            padding: 20px;
        }

        /* Summary Card Styles */
        .summary-card {
            width: 350px;
            height: 450px;
            background: white;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .summary-header {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }

        .strategy-badge {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
        }

        .category-label {
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            opacity: 0.9;
        }

        .strategy-title {
            font-size: 22px;
            font-weight: 600;
            color: white;
            margin-bottom: 10px;
            line-height: 1.2;
        }

        .strategy-summary {
            font-size: 14px;
            color: white;
            margin-bottom: auto;
            line-height: 1.4;
            opacity: 0.95;
        }

        .summary-footer {
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.3);
        }

        .summary-meta {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: white;
        }

        /* Full Detail Card Styles */
        .detail-card {
            width: 900px;
            background: white;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            display: flex;
            overflow: hidden;
        }

        .detail-left {
            width: 450px;
            padding: 20px;
            border-right: 1px dotted var(--border-color);
        }

        .detail-right {
            width: 450px;
            padding: 20px;
            overflow-y: auto;
        }

        .detail-header {
            height: 50px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            margin: -20px -20px 20px -20px;
        }
        
        .detail-content h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .detail-content ul {
            padding-left: 20px;
            margin-bottom: 20px;
        }

        .detail-content li {
            margin-bottom: 8px;
            font-size: 14px;
        }

        /* Hide elements based on view */
        .view-summary .detail-card-wrapper {
            display: none;
        }

        .view-detail .summary-card-wrapper {
            display: none;
        }

        /* Loading overlay */
        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 20px;
        }

        /* Individual card export button */
        .card-export-btn {
            margin-top: 15px;
            padding: 8px 16px;
            border: 1px solid var(--border-color);
            background: white;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            transition: all 0.3s;
            color: var(--medium-gray);
        }

        .card-export-btn:hover {
            background: var(--light-gray);
            border-color: var(--medium-gray);
            color: var(--dark-gray);
        }

        .summary-card-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }
        
        .summary-card .card-export-btn {
            align-self: stretch;
        }

        .detail-card-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .detail-card-wrapper .card-export-btn {
            width: 200px;
        }
        
        /* Implementation Adaptations Styles */
        .implementation-adaptations {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }
        
        .adaptation-level {
            margin-bottom: 15px;
        }
        
        .adaptation-level:last-child {
            margin-bottom: 0;
        }
        
        .adaptation-level-title {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .adaptation-level-title.essential {
            color: var(--essential-color);
        }
        
        .adaptation-level-title.enhanced {
            color: var(--enhanced-color);
        }
        
        .adaptation-level-title.transformative {
            color: var(--transformative-color);
        }
        
        .adaptation-list {
            list-style: none;
            padding-left: 15px;
            font-size: 13px;
        }
        
        .adaptation-list li {
            margin-bottom: 5px;
            position: relative;
        }
        
        .adaptation-list li:before {
            content: "•";
            position: absolute;
            left: -15px;
        }

        .section {
            margin-bottom: 20px;
        }
        
        .section-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 10px;
            text-transform: uppercase;
        }
        
        .section-subtitle {
            font-size: 13px;
            font-style: italic;
            color: var(--medium-gray);
            font-weight: normal;
            margin-bottom: 12px;
        }
        
        .implementation-tips {
            list-style-type: decimal;
            padding-left: 25px;
        }
        
        .implementation-tips li {
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .example-text {
            font-style: italic;
            font-size: 13px;
            color: var(--medium-gray);
            margin-top: 3px;
            display: block;
        }

        .priority-star {
            font-weight: bold;
            margin-right: 5px;
        }
        
        .tech-structure {
            border-top: 1px solid var(--light-gray);
            padding-top: 15px;
            margin-bottom: 20px;
        }
        
        .tech-structure-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .consideration-item {
            margin-bottom: 8px;
        }

        /* Hide filtered cards */
        .card-hidden {
            display: none !important;
        }

        /* Print styles for clean export */
        @media print {
            body {
                background-color: white;
                padding: 0;
            }
            
            .controls {
                display: none;
            }
        }
    </style>
</head>
<body class="view-summary">
    <div class="controls">
        <h1>Hybrid Learning Facilitation Strategy Cards - Export Tool</h1>
        
        <div class="view-controls">
            <div class="view-toggle">
                <button class="toggle-btn active" onclick="setView('summary')">
                    <i class="fas fa-th"></i> Summary View
                </button>
                <button class="toggle-btn" onclick="setView('detail')">
                    <i class="fas fa-list"></i> Full Details View
                </button>
            </div>
            
            <div class="export-controls">
                <button class="export-btn export-summary" onclick="exportCards('summary')">
                    <i class="fas fa-download"></i> Export Summary Cards (for Canvas)
                </button>
                <button class="export-btn export-detail" onclick="exportCards('detail')">
                    <i class="fas fa-download"></i> Export Detailed Cards (for Reference)
                </button>
                <button class="export-btn export-both" onclick="exportCards('both')">
                    <i class="fas fa-download"></i> Export Both Sets
                </button>
            </div>
        </div>
        
        <div class="filter-controls">
            <span class="filter-label">Filter by:</span>
            <select class="filter-select" id="categoryFilter" onchange="applyFilters()">
                <option value="">All Strategy Categories</option>
                <option value="visibility-presence">Visibility & Presence</option>
                <option value="engagement-orchestration">Engagement Orchestration</option>
                <option value="technical-facilitation">Technical Facilitation</option>
            </select>
            
            <select class="filter-select" id="focusFilter" onchange="applyFilters()">
                <option value="">All Focus Areas</option>
                <option value="attention-management">Attention Management</option>
                <option value="participation-activation">Participation Activation</option>
                <option value="discussion-orchestration">Discussion Orchestration</option>
                <option value="connection-building">Connection Building</option>
                <option value="technology-integration">Technology Integration</option>
            </select>
        </div>
    </div>

    <div class="cards-container" id="cardsContainer">
        <!-- Cards will be populated by JavaScript -->
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <i class="fas fa-spinner fa-spin fa-3x"></i>
        <p>Generating export... This may take a moment.</p>
    </div>

    <script>
        // Strategy card data with modern structure
        const allCardData = [
            // VISIBILITY & PRESENCE - 5 cards
            {
                id: "v1-name-acknowledge-remote",
                code: "V1",
                name: "Name and Acknowledge Remote Students",
                category: "visibility-presence",
                categoryDisplay: "VISIBILITY & PRESENCE",
                focus: "attention-management",
                description: "When remote students seem invisible or disconnected, use names, direct camera eye contact, and verbal check-ins to make them feel equally present in the learning space.",
                goodForWhen: [
                    "Remote students have cameras off or seem withdrawn",
                    "You've been focusing on the physical room too long",
                    "Starting class and can't 'see' who's really there",
                    "After tech issues made remote students disappear from view"
                ],
                technology: {
                    tech: "Camera positioned to capture instructor presence",
                    structure: "Clear audio for verbal signaling",
                    interaction: "Optional: Visual signals or slides that reinforce presence"
                },
                considerations: {
                    remote: "Acknowledge by name; use direct eye contact with camera; check audio/visual clarity periodically",
                    onsite: "Explain purpose of presence signaling; maintain physical presence while attending to remote students",
                    crossmodal: {
                        text: "Balance physical and digital presence; celebrate contributions from all locations",
                        priority: true
                    }
                },
                tips: [
                    "Begin each session with explicit acknowledgment of all spaces",
                    "Use inclusive language consistently",
                    {
                        step: "Create regular verbal check-ins with remote participants",
                        example: "Example: \"I'm seeing nods in the room - remote friends, use reactions to show if this resonates\"",
                        priority: true
                    },
                    "Position yourself to maintain visibility to both groups",
                    "Train yourself to look at camera when addressing remote students"
                ],
                adaptations: {
                    essential: [
                        "Verbal acknowledgment of both groups every 10 minutes",
                        "Simple naming of participants from both modalities",
                        "Basic camera awareness when speaking"
                    ],
                    enhanced: [
                        "Sophisticated presence cues (physical and digital)",
                        "Student presence monitors from each modality",
                        "Visual indicators of current attention focus"
                    ],
                    transformative: [
                        "Students co-create presence practices",
                        "Dynamic presence responding to engagement data",
                        "Presence as pedagogical tool for learning"
                    ]
                }
            },
            {
                id: "v2-monitor-check-both-groups",
                code: "V2",
                name: "Monitor and Check In With Both Groups",
                category: "visibility-presence",
                categoryDisplay: "VISIBILITY & PRESENCE",
                focus: "attention-management",
                description: "When you need to maintain awareness of engagement across spaces, combine systematic monitoring of both groups with regular structured check-ins to catch issues early.",
                goodForWhen: [
                    "You realize you've ignored one group for 10+ minutes",
                    "Energy feels 'off' but you can't pinpoint why",
                    "Cameras start turning off one by one",
                    "Teaching complex content that needs everyone following along",
                    "Remote students stop participating in chat/audio"
                ],
                technology: {
                    tech: "Dual displays for content and participants",
                    structure: "Platform with engagement indicators",
                    interaction: "Timer for regular check-in reminders"
                },
                considerations: {
                    remote: "Set expectations for engagement signals; provide multiple ways to show understanding",
                    onsite: "Position to see screens while teaching; explain why you're checking both spaces",
                    crossmodal: {
                        text: "Compare patterns across modalities and address differences explicitly",
                        priority: true
                    }
                },
                tips: [
                    "Develop a systematic scanning pattern: room → screen → chat → repeat",
                    "Set soft reminders to check in with each group",
                    {
                        step: "Learn to read engagement signals for each modality",
                        example: "Example: Remote = camera status, reactions, chat activity; On-site = body language, eye contact, side conversations",
                        priority: true
                    },
                    "Address engagement issues immediately when spotted",
                    "Train peripheral vision for simultaneous awareness"
                ],
                adaptations: {
                    essential: [
                        "Basic visual scanning of both spaces every 5-10 minutes",
                        "Simple verbal checks: 'How are we doing online? And in the room?'",
                        "Notice major disengagement signals only"
                    ],
                    enhanced: [
                        "Student engagement monitors reporting from each space",
                        "Structured check-in protocols with varied methods",
                        "Pattern recognition for early intervention"
                    ],
                    transformative: [
                        "Real-time engagement analytics informing facilitation",
                        "Student-designed monitoring and feedback systems",
                        "Predictive engagement support based on patterns"
                    ]
                }
            },
            {
                id: "v3-bridge-chat-voice",
                code: "V3",
                name: "Bridge Chat and Voice Conversations",
                category: "visibility-presence",
                categoryDisplay: "VISIBILITY & PRESENCE",
                focus: "participation-activation",
                description: "When parallel conversations emerge in chat while verbal discussion continues, actively weave digital insights into spoken dialogue to create one unified conversation.",
                goodForWhen: [
                    "Rich ideas appear in chat but aren't acknowledged verbally",
                    "Quiet students only participate through text",
                    "Chat becomes a separate conversation from verbal discussion",
                    "Important questions get lost in the chat stream"
                ],
                technology: {
                    tech: "Chat feature or dedicated backchannel platform",
                    structure: "Display visible to instructor",
                    interaction: "Optional: Chat moderation tools"
                },
                considerations: {
                    remote: "Primary participation avenue when audio limited; establish signals for urgent comments",
                    onsite: "Encourage use even when physically present; position devices for dual awareness",
                    crossmodal: {
                        text: "Use backchannel to bridge modalities; highlight insights from both groups",
                        priority: true
                    }
                },
                tips: [
                    "Establish clear purpose and protocols for digital conversation use",
                    "Designate regular monitoring and integration moments",
                    {
                        step: "Schedule pauses to weave digital insights into verbal discussion",
                        example: "Example: 'Let me pause to bring in some insights from our chat - Alex raised an important point about...'",
                        priority: true
                    },
                    "Model inclusive behavior by responding to digital contributions"
                ],
                adaptations: {
                    essential: [
                        "Basic chat monitoring with periodic verbal acknowledgment",
                        "Simple integration: read key insights aloud every 10 minutes",
                        "Instructor scans chat regularly during main discussion"
                    ],
                    enhanced: [
                        "Multiple conversation channels: questions, resources, reflections",
                        "Student moderators help synthesize and surface themes",
                        "Structured 'bridge moments' connecting digital to verbal conversation"
                    ],
                    transformative: [
                        "AI-assisted theme identification and surfacing",
                        "Student-designed conversation integration protocols",
                        "Real-time sentiment and engagement analysis"
                    ]
                }
            },
            {
                id: "v4-balance-who-speaks",
                code: "V4",
                name: "Balance Who Speaks When",
                category: "visibility-presence",
                categoryDisplay: "VISIBILITY & PRESENCE",
                focus: "participation-activation",
                description: "When the same voices dominate or one modality goes silent, use structured turn-taking and strategic invitations to ensure everyone gets airtime regardless of location.",
                goodForWhen: [
                    "Same 3 people answer every question",
                    "Remote students stop trying to contribute",
                    "On-site group dominates all discussions",
                    "Facilitating Q&A with hands up everywhere"
                ],
                technology: {
                    tech: "Raised hand feature or equivalent",
                    structure: "Speaking queue management",
                    interaction: "Clear audio for all participants"
                },
                considerations: {
                    remote: "Provide clear signals for wanting to speak; establish backup communication if audio fails",
                    onsite: "Be aware of remote queue; practice patience with technology delays",
                    crossmodal: {
                        text: "Create connections between contributions from different modalities; celebrate diverse perspectives",
                        priority: true
                    }
                },
                tips: [
                    "Establish clear protocols for indicating desire to speak",
                    "Create predictable rotation patterns",
                    {
                        step: "Use specific invitations and strategic question redirection",
                        example: "Example: 'Before we hear from the room, let me check if anyone online wants to add to this...'",
                        priority: true
                    },
                    "Allow processing time for technology delays"
                ],
                adaptations: {
                    essential: [
                        "Simple rotation: alternate between remote and on-site speakers",
                        "Basic raised hand protocols with instructor management",
                        "Verbal checking for remote contributions before moving on"
                    ],
                    enhanced: [
                        "Student facilitators manage speaking queue across modalities",
                        "Strategic questioning patterns that intentionally include all spaces",
                        "Time limits and prompts that support equitable participation"
                    ],
                    transformative: [
                        "Student-designed turn-taking norms and protocols",
                        "Dynamic facilitation based on participation analytics",
                        "Speaking equity as community responsibility"
                    ]
                }
            },
            {
                id: "v5-give-crystal-clear-instructions",
                code: "V5",
                name: "Give Crystal Clear Instructions",
                category: "visibility-presence",
                categoryDisplay: "VISIBILITY & PRESENCE",
                focus: "participation-activation",
                description: "When explaining multi-step activities or complex tasks, use visual + verbal + written reinforcement to ensure both remote and on-site students know exactly what to do.",
                goodForWhen: [
                    "Explaining activities with 4+ steps to remember",
                    "Different tools/approaches needed for each modality",
                    "Students look confused before you've even finished explaining",
                    "Same clarification questions keep coming from both groups"
                ],
                technology: {
                    tech: "Screen share with visual instructions",
                    structure: "Written steps in chat or shared doc",
                    interaction: "Confirmation checks before starting"
                },
                considerations: {
                    remote: "Can't see your gestures clearly; need written backup; may have audio delays",
                    onsite: "May focus on you rather than screen; need reminders to check digital instructions",
                    crossmodal: {
                        text: "Same core instructions but different technical steps; celebrate when both groups are ready",
                        priority: true
                    }
                },
                tips: [
                    "State the activity goal before diving into steps",
                    "Use the 'tell-show-check' method for complex instructions",
                    {
                        step: "Provide instructions in multiple formats simultaneously",
                        example: "Example: Say it verbally WHILE showing slide WHILE posting steps in chat",
                        priority: true
                    },
                    "Do a comprehension check before releasing groups to work",
                    "Designate instruction clarifiers in each modality"
                ],
                adaptations: {
                    essential: [
                        "Verbal instructions with one visual backup (slide or chat)",
                        "Simple 3-step maximum activities",
                        "Basic 'any questions?' check before starting"
                    ],
                    enhanced: [
                        "Visual flowcharts or diagrams for complex activities",
                        "Student instruction ambassadors who can re-explain",
                        "Practice rounds for complicated technical procedures"
                    ],
                    transformative: [
                        "Students create instruction guides for each other",
                        "Video instruction libraries for common activities",
                        "Adaptive instructions based on modality and experience level"
                    ]
                }
            },

            // ENGAGEMENT ORCHESTRATION - 4 cards
            {
                id: "e1-connect-room-remote-discussion",
                code: "E1",
                name: "Connect Room and Remote Discussions",
                category: "engagement-orchestration",
                categoryDisplay: "ENGAGEMENT ORCHESTRATION",
                focus: "discussion-orchestration",
                description: "When physical and virtual students work in silos, use strategic discussion design to create bridges between groups through complementary tasks, synthesis moments, or cross-modal partnerships.",
                goodForWhen: [
                    "Room gets animated but remote students can't join in",
                    "Two parallel conversations that never connect",
                    "Complex topics need diverse perspectives from all locations",
                    "Want to leverage different strengths of each modality",
                    "Group work where modalities don't naturally mix"
                ],
                technology: {
                    tech: "Shared documentation space (whiteboard, collaborative doc)",
                    structure: "Clear audio for cross-modal sharing",
                    interaction: "Visual mapping of connections between ideas"
                },
                considerations: {
                    remote: "Provide clear role in discussion structure; ensure equal time for sharing insights",
                    onsite: "Direct attention to remote contributions; avoid dominating synthesis moments",
                    crossmodal: {
                        text: "Design interdependence into the discussion structure; celebrate different perspectives",
                        priority: true
                    }
                },
                tips: [
                    "Assign complementary angles to each modality",
                    "Build in mandatory cross-modal exchange points",
                    {
                        step: "Create explicit synthesis moments that require both perspectives",
                        example: "Example: 'Remote group analyzed the data, on-site group identified patterns - now let's connect these insights...'",
                        priority: true
                    },
                    "Use visual mapping to show connections",
                    "Rotate which group shares first"
                ],
                adaptations: {
                    essential: [
                        "Simple division: different questions to each group",
                        "Basic report-back structure between modalities",
                        "Instructor highlights connections"
                    ],
                    enhanced: [
                        "Student bridge-builders connecting discussions",
                        "Real-time collaborative documentation",
                        "Structured dialogue protocols"
                    ],
                    transformative: [
                        "Student-designed discussion architectures",
                        "Dynamic redistribution based on emerging themes",
                        "Cross-modal partnerships throughout"
                    ]
                }
            },
            {
                id: "e2-bring-everyone-back-together",
                code: "E2",
                name: "Bring Everyone Back Together",
                category: "engagement-orchestration",
                categoryDisplay: "ENGAGEMENT ORCHESTRATION",
                focus: "attention-management",
                description: "When breakout rooms or parallel work ends, use multi-sensory cues and structured re-entry to get everyone's attention and ready for the next phase.",
                goodForWhen: [
                    "Breakout rooms need to close but some are still discussing",
                    "Transitioning from small group to whole class",
                    "Energy is scattered after independent work",
                    "Need everyone's attention for important announcements"
                ],
                technology: {
                    tech: "Multi-sensory attention cues (audio, visual)",
                    structure: "Platform features for group announcements",
                    interaction: "Optional: Countdown timer visible to all"
                },
                considerations: {
                    remote: "Provide clear audio signal for refocusing; check video status; use chat confirmation if needed",
                    onsite: "Direct attention to screens showing remote participants; use physical positioning to signal transition",
                    crossmodal: {
                        text: "Use same signal across all spaces; celebrate coming back together",
                        priority: false
                    }
                },
                tips: [
                    "Develop consistent refocusing ritual",
                    "Give 1-minute warning before refocusing",
                    {
                        step: "Use multi-sensory refocusing cues",
                        example: "Example: Chime + visual countdown + verbal cue: \"Coming back together in 3, 2, 1\"",
                        priority: true
                    },
                    "Start refocused segment with easy whole-group activity"
                ],
                adaptations: {
                    essential: [
                        "Simple audio cue with verbal reinforcement",
                        "Basic check that all are ready to proceed",
                        "Clear statement of what comes next"
                    ],
                    enhanced: [
                        "Ritualized refocusing with student roles",
                        "Quick energizer activities for refocusing",
                        "Visual confirmation systems across modalities"
                    ],
                    transformative: [
                        "Student-designed refocusing practices",
                        "Adaptive refocusing based on energy levels",
                        "Refocusing as community-building moment"
                    ]
                }
            },
            {
                id: "e3-read-and-boost-energy",
                code: "E3",
                name: "Read and Boost Energy Levels",
                category: "engagement-orchestration",
                categoryDisplay: "ENGAGEMENT ORCHESTRATION",
                focus: "participation-activation",
                description: "When you sense energy dropping (cameras off, slumping bodies, silence), intervene with quick activities that re-energize both spaces without losing learning focus.",
                goodForWhen: [
                    "Post-lunch energy crash hits everyone",
                    "Cameras turning off one by one",
                    "Physical room gets sleepy during content delivery",
                    "Long session needs energy injection"
                ],
                technology: {
                    tech: "Platform with engagement indicators",
                    structure: "Optional: Energy/mood polling tools",
                    interaction: "Breakout room capability for energy shifts"
                },
                considerations: {
                    remote: "Recognition of different energy constraints and needs; variety in engagement methods",
                    onsite: "Awareness of remote energy needs; support for different engagement styles",
                    crossmodal: {
                        text: "Coordinated energy management; celebration of different energy contributions",
                        priority: false
                    }
                },
                tips: [
                    "Develop skills in reading energy across modalities",
                    "Plan activity sequences with energy flow in mind",
                    {
                        step: "Use strategic energy shifts and variety in engagement modes",
                        example: "Example: 'I'm noticing we need a shift - let's do a quick stretch and then move to small group discussions'",
                        priority: true
                    },
                    "Build in energy checking and adjustment mechanisms"
                ],
                adaptations: {
                    essential: [
                        "Basic energy checks and simple activity adjustments",
                        "Standard breaks and movement opportunities",
                        "Instructor-led energy management with simple interventions"
                    ],
                    enhanced: [
                        "Student energy monitors and feedback mechanisms",
                        "Sophisticated activity repertoire for different energy needs",
                        "Real-time energy assessment and adjustment strategies"
                    ],
                    transformative: [
                        "Student-designed energy management protocols",
                        "Predictive energy management based on learning analytics",
                        "Energy flow as fundamental pedagogical consideration"
                    ]
                }
            },
            {
                id: "e4-manage-qa-fairly",
                code: "E4",
                name: "Manage Q&A Fairly",
                category: "engagement-orchestration",
                categoryDisplay: "ENGAGEMENT ORCHESTRATION",
                focus: "participation-activation",
                description: "When questions come from multiple channels (raised hands, chat, unmuting), create a fair system that doesn't privilege one modality or miss important questions.",
                goodForWhen: [
                    "Questions flooding in through chat while hands are raised",
                    "Same people always get to ask questions first",
                    "Remote students struggle to 'break in' to ask questions",
                    "Important chat questions get lost in the flow"
                ],
                technology: {
                    tech: "Raised hand features and chat monitoring",
                    structure: "Queue management system",
                    interaction: "Optional: Q&A tracking tool"
                },
                considerations: {
                    remote: "Multiple ways to indicate questions; clear acknowledgment when seen",
                    onsite: "Patience while remote questions are gathered; awareness of chat activity",
                    crossmodal: {
                        text: "Alternate between modalities; acknowledge all question formats",
                        priority: true
                    }
                },
                tips: [
                    "Announce Q&A protocol before starting",
                    "Scan all channels before selecting questions",
                    {
                        step: "Use explicit alternation between sources",
                        example: "Example: 'I'll take one from the room, then one from chat, then a raised hand online...'",
                        priority: true
                    },
                    "Have someone help monitor chat questions",
                    "Read chat questions aloud for everyone"
                ],
                adaptations: {
                    essential: [
                        "Simple rotation between modalities",
                        "Instructor monitors all channels",
                        "Basic acknowledgment of question sources"
                    ],
                    enhanced: [
                        "Student Q&A moderators for each channel",
                        "Question theming and clustering",
                        "Visual queue showing question order"
                    ],
                    transformative: [
                        "AI-assisted question categorization",
                        "Student-designed Q&A protocols",
                        "Democratic question prioritization systems"
                    ]
                }
            },

            // TECHNICAL FACILITATION - 4 cards
            {
                id: "t1-switch-tools-without-losing-anyone",
                code: "T1",
                name: "Switch Tools Without Losing Anyone",
                category: "technical-facilitation",
                categoryDisplay: "TECHNICAL FACILITATION",
                focus: "technology-integration",
                description: "When moving between platforms or tools, use clear step-by-step guidance and confirmation checks to ensure everyone successfully makes the transition together.",
                goodForWhen: [
                    "Moving from video to collaborative workspace (Miro, Padlet)",
                    "Switching between main room and breakouts",
                    "Opening new browser tabs or applications",
                    "Some students struggle with multiple windows",
                    "Need to verify everyone has access before proceeding"
                ],
                technology: {
                    tech: "Pre-tested platform functionality",
                    structure: "Backup communication methods",
                    interaction: "Clear transition protocols"
                },
                considerations: {
                    remote: "Clear instructions and support for platform switching; backup plans for technical difficulties",
                    onsite: "Assistance for peers with technical challenges; awareness of remote transition needs",
                    crossmodal: {
                        text: "Synchronized transition timing; celebration of successful transitions",
                        priority: false
                    }
                },
                tips: [
                    "Test all platform transitions before session",
                    "Provide step-by-step verbal AND visual instructions",
                    {
                        step: "Build in verification checks before proceeding",
                        example: "Example: 'Thumbs up when you see the Miro board. We'll wait for everyone before we start.'",
                        priority: true
                    },
                    "Have backup access methods ready",
                    "Assign peer tech helpers"
                ],
                adaptations: {
                    essential: [
                        "Simple verbal instructions with patience",
                        "Basic 'everyone in?' confirmation",
                        "Manual help for strugglers"
                    ],
                    enhanced: [
                        "Visual transition guides prepared",
                        "Student tech buddies system",
                        "Multiple verification methods"
                    ],
                    transformative: [
                        "Student-created transition tutorials",
                        "Automated access verification",
                        "Seamless multi-tool workflows"
                    ]
                }
            },
            {
                id: "t2-distribute-tech-support",
                code: "T2",
                name: "Distribute Tech Support Roles",
                category: "technical-facilitation",
                categoryDisplay: "TECHNICAL FACILITATION",
                focus: "technology-integration",
                description: "When managing multiple technologies feels overwhelming, assign specific tech roles to students (chat monitor, timer keeper, link sharer) to share the load.",
                goodForWhen: [
                    "You're juggling too many technical tasks",
                    "Students could help but don't know how",
                    "Technical complexity distracts from teaching",
                    "Building student technical confidence"
                ],
                technology: {
                    tech: "Clear role documentation and protocols",
                    structure: "Communication channels for tech team coordination",
                    interaction: "Platform permission settings for student roles"
                },
                considerations: {
                    remote: "Technology roles that leverage remote perspective and access; clear communication with on-site tech team",
                    onsite: "Technology roles that include awareness of remote experience; physical access to room technology",
                    crossmodal: {
                        text: "Balanced tech responsibility across modalities; cross-modal tech team partnerships",
                        priority: true
                    }
                },
                tips: [
                    "Start with essential tech roles and expand gradually",
                    "Provide clear role descriptions, boundaries, and training",
                    {
                        step: "Create cross-modal tech partnerships and communication channels",
                        example: "Example: Remote 'chat monitor' + on-site 'screen manager' working together as tech team",
                        priority: true
                    },
                    "Rotate technology roles to build widespread skills"
                ],
                adaptations: {
                    essential: [
                        "Basic roles: chat monitor, timekeeper, link-sharer",
                        "Simple role cards with minimal training requirements",
                        "Instructor oversight and backup for all tech functions"
                    ],
                    enhanced: [
                        "Comprehensive tech roles including troubleshooting and coordination",
                        "Student tech team leadership and training protocols",
                        "Regular assessment and improvement of tech role effectiveness"
                    ],
                    transformative: [
                        "Student-designed tech roles and distributed support systems",
                        "Innovation in distributed technology management and coordination",
                        "Technology roles as career exploration and skill development"
                    ]
                }
            },
            {
                id: "t3-troubleshoot-without-stopping-class",
                code: "T3",
                name: "Troubleshoot Without Stopping Class",
                category: "technical-facilitation",
                categoryDisplay: "TECHNICAL FACILITATION",
                focus: "technology-integration",
                description: "When tech issues arise, use parallel support strategies to help struggling students while maintaining learning momentum for others.",
                goodForWhen: [
                    "One student can't access the breakout room",
                    "Audio problems for individual participants",
                    "Screen sharing fails for a presenter",
                    "Platform features not working for some"
                ],
                technology: {
                    tech: "Diagnostic protocols and common solution guides",
                    structure: "Private communication channels for tech support",
                    interaction: "Backup participation methods"
                },
                considerations: {
                    remote: "Quick diagnostic questions and solutions; alternative participation methods during resolution",
                    onsite: "Assistance with remote troubleshooting; patience during tech resolution",
                    crossmodal: {
                        text: "Seamless continuation of learning during troubleshooting; celebration of successful resolution",
                        priority: false
                    }
                },
                tips: [
                    "Develop quick diagnostic question sequences",
                    "Create backup participation methods for common issues",
                    {
                        step: "Maintain learning flow for others while resolving individual tech issues",
                        example: "Example: 'Sarah, let me help you with that audio issue in a private message while the rest of us continue with...'",
                        priority: true
                    },
                    "Document common issues and solutions for future reference"
                ],
                adaptations: {
                    essential: [
                        "Basic troubleshooting with simple yes/no diagnostic questions",
                        "Manual backup methods for participation during tech issues",
                        "Instructor-led troubleshooting with focus on quick resolution"
                    ],
                    enhanced: [
                        "Student tech support specialists with advanced troubleshooting skills",
                        "Comprehensive diagnostic protocols and solution databases",
                        "Parallel troubleshooting that doesn't interrupt main learning flow"
                    ],
                    transformative: [
                        "Student-designed troubleshooting protocols and peer support systems",
                        "Predictive issue identification and proactive resolution",
                        "Troubleshooting as collaborative learning and skill development opportunity"
                    ]
                }
            },
            {
                id: "t4-adapt-when-tech-fails",
                code: "T4",
                name: "Adapt When Tech Fails",
                category: "technical-facilitation",
                categoryDisplay: "TECHNICAL FACILITATION",
                focus: "technology-integration",
                description: "When technology completely fails, pivot quickly to backup methods while maintaining learning objectives and positive atmosphere.",
                goodForWhen: [
                    "Video platform crashes mid-session",
                    "Collaborative tool won't load for half the class",
                    "Internet issues affect multiple participants",
                    "Key features suddenly stop working"
                ],
                technology: {
                    tech: "Multiple backup tools and methods prepared",
                    structure: "Clear adaptation protocols and decision trees",
                    interaction: "Communication systems for announcing adaptations"
                },
                considerations: {
                    remote: "Alternative participation methods prepared; clear communication about adaptations",
                    onsite: "Flexibility in room setup and activities; support for understanding adaptations",
                    crossmodal: {
                        text: "Coordinated adaptation that maintains connection; celebration of adaptive problem-solving",
                        priority: true
                    }
                },
                tips: [
                    "Prepare multiple backup approaches for key learning activities",
                    "Develop decision-making criteria for when to adapt vs. troubleshoot",
                    {
                        step: "Communicate adaptations clearly and frame positively",
                        example: "Example: 'The video isn't working, so let's use this as an opportunity to practice our collaborative note-taking skills instead'",
                        priority: true
                    },
                    "Involve students in adaptive decision-making when appropriate"
                ],
                adaptations: {
                    essential: [
                        "Simple backup methods prepared for essential activities",
                        "Basic instructor-led adaptation with clear communication",
                        "Focus on maintaining core learning rather than sophisticated adaptation"
                    ],
                    enhanced: [
                        "Comprehensive adaptation strategies with student input",
                        "Real-time collaborative decision-making about adaptations",
                        "Multiple backup tools and sophisticated switching protocols"
                    ],
                    transformative: [
                        "Student-designed adaptation protocols and backup systems",
                        "Adaptive response as signature element of resilient learning design",
                        "Technology challenges as opportunities for innovation and learning"
                    ]
                }
            }
        ];

        // Category and focus mapping for colors and icons
        const categoryMap = {
            'visibility-presence': { 
                color: 'visibility', 
                icon: 'V', 
                label: 'VISIBILITY & PRESENCE' 
            },
            'engagement-orchestration': { 
                color: 'engagement', 
                icon: 'E', 
                label: 'ENGAGEMENT ORCHESTRATION' 
            },
            'technical-facilitation': { 
                color: 'technical', 
                icon: 'T', 
                label: 'TECHNICAL FACILITATION' 
            }
        };

        const focusMap = {
            'attention-management': 'Attention Management',
            'participation-activation': 'Participation Activation',
            'discussion-orchestration': 'Discussion Orchestration',
            'connection-building': 'Connection Building',
            'technology-integration': 'Technology Integration'
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            renderCards();
        });

        function renderCards() {
            const container = document.getElementById('cardsContainer');
            container.innerHTML = '';
            
            // Filter cards based on current filters
            const filteredCards = getFilteredCards();
            
            filteredCards.forEach((card, index) => {
                // Create summary card wrapper
                const summaryWrapper = createSummaryCard(card, index);
                container.appendChild(summaryWrapper);
                
                // Create detail card wrapper
                const detailWrapper = createDetailCard(card, index);
                container.appendChild(detailWrapper);
            });
        }

        function getFilteredCards() {
            const categoryFilter = document.getElementById('categoryFilter').value;
            const focusFilter = document.getElementById('focusFilter').value;
            
            const filtered = allCardData.filter(card => {
                const categoryMatch = !categoryFilter || card.category === categoryFilter;
                const focusMatch = !focusFilter || card.focus === focusFilter;
                return categoryMatch && focusMatch;
            });
            
            // Sort cards by category to group by color
            return filtered.sort((a, b) => {
                const categoryOrder = ['visibility-presence', 'engagement-orchestration', 'technical-facilitation'];
                return categoryOrder.indexOf(a.category) - categoryOrder.indexOf(b.category);
            });
        }

        function createSummaryCard(card, index) {
            const wrapper = document.createElement('div');
            wrapper.className = 'summary-card-wrapper';
            wrapper.setAttribute('data-category', card.category);
            wrapper.setAttribute('data-focus', card.focus);
            
            const colorVar = `var(--${categoryMap[card.category].color}-color)`;
            
            wrapper.innerHTML = `
                <div class="summary-card" data-card-id="${card.id}" style="background-color: ${colorVar};">
                    <div class="summary-header">
                        <div class="category-label" style="color: white;">${card.categoryDisplay}</div>
                        <div class="focus-label" style="color: white; font-size: 11px; font-weight: 500; text-transform: uppercase; opacity: 0.8; margin-top: 5px;">${focusMap[card.focus].toUpperCase()}</div>
                    </div>
                    
                    <h2 class="strategy-title">${card.name}</h2>
                    
                    <p class="strategy-summary">
                        ${card.description}
                    </p>
                    
                    <div class="summary-footer">
                        <div class="summary-meta">
                            <i class="fas fa-cogs"></i>
                            <span>${focusMap[card.focus]}</span>
                        </div>
                    </div>
                </div>
                <button class="card-export-btn" onclick="exportSingleCard('${card.id}', 'summary')">
                    <i class="fas fa-download"></i> Export this card
                </button>
            `;
            
            return wrapper;
        }

        function createDetailCard(card, index) {
            const wrapper = document.createElement('div');
            wrapper.className = 'detail-card-wrapper';
            wrapper.setAttribute('data-category', card.category);
            wrapper.setAttribute('data-focus', card.focus);
            
            const colorVar = `var(--${categoryMap[card.category].color}-color)`;
            
            wrapper.innerHTML = `
                <div class="detail-card" data-card-id="${card.id}">
                    <div class="detail-left">
                        <div class="detail-header" style="background-color: ${colorVar};">
                            <div style="background: white; padding: 6px 12px; border-radius: 15px; font-weight: bold; font-size: 14px; color: ${colorVar};">${card.categoryDisplay}</div>
                            <div style="background: white; padding: 4px 10px; border-radius: 12px; font-weight: 600; font-size: 12px; text-transform: uppercase; color: ${colorVar}; margin-top: 8px;">${focusMap[card.focus].toUpperCase()}</div>
                        </div>
                        
                        <div class="detail-content">
                            <h2 style="font-size: 24px; margin-bottom: 10px;">${card.name}</h2>
                            
                            <p style="margin-bottom: 20px;">${card.description}</p>
                            
                            <h3>Good for/when:</h3>
                            <ul>
                                ${card.goodForWhen.map(situation => `<li>${situation}</li>`).join('')}
                            </ul>
                            

                            
                            <div class="tech-structure">
                                <h3 class="tech-structure-title" style="color: ${colorVar};">TECHNOLOGY & STRUCTURE</h3>
                                <p style="margin-bottom: 8px;">• <strong>${card.technology.tech}</strong></p>
                                <p style="margin-bottom: 8px;">• <strong>${card.technology.structure}</strong></p>
                                <p style="margin-bottom: 0;">• ${card.technology.interaction}</p>
                            </div>
                            
                            <div class="section">
                                <h3 class="section-title" style="color: ${colorVar};">HYBRID CONSIDERATIONS</h3>
                                <div class="hybrid-considerations">
                                    <p class="consideration-item"><strong>• Remote:</strong> ${card.considerations.remote}</p>
                                    <p class="consideration-item"><strong>• On-site:</strong> ${card.considerations.onsite}</p>
                                    <p class="consideration-item"><strong>• ${card.considerations.crossmodal.priority ? '<span style="color: ' + colorVar + '; font-weight: bold;">★</span> ' : ''}Cross-modal:</strong> ${card.considerations.crossmodal.text}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="detail-right">
                        <div class="detail-content">
                            <h3 class="section-title" style="color: ${colorVar};">IMPLEMENTATION TIPS</h3>
                            <ol class="implementation-tips">
                                ${generateTips(card.tips, colorVar)}
                            </ol>
                            
                            <div class="section">
                                <h3 class="section-title" style="color: ${colorVar};">IMPLEMENTATION ADAPTATIONS</h3>
                                <p class="section-subtitle">Ideas for adapting this strategy to different implementation levels</p>
                                <div class="implementation-adaptations">
                                    <div class="adaptation-level">
                                        <div class="adaptation-level-title essential">Essential Level:</div>
                                        <ul class="adaptation-list">
                                            ${card.adaptations.essential.map(item => `<li>${item}</li>`).join('')}
                                        </ul>
                                    </div>
                                    
                                    <div class="adaptation-level">
                                        <div class="adaptation-level-title enhanced">Enhanced Level:</div>
                                        <ul class="adaptation-list">
                                            ${card.adaptations.enhanced.map(item => `<li>${item}</li>`).join('')}
                                        </ul>
                                    </div>
                                    
                                    <div class="adaptation-level">
                                        <div class="adaptation-level-title transformative">Transformative Level:</div>
                                        <ul class="adaptation-list">
                                            ${card.adaptations.transformative.map(item => `<li>${item}</li>`).join('')}
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="card-export-btn" onclick="exportSingleCard('${card.id}', 'detail')">
                    <i class="fas fa-download"></i> Export this card
                </button>
            `;
            
            return wrapper;
        }

        function generateTips(tips, colorVar) {
            return tips.map(item => {
                if (typeof item === 'string') {
                    return `<li>${item}</li>`;
                } else {
                    const star = item.priority ? '<span style="color: ' + colorVar + '; font-weight: bold;">★ </span>' : '';
                    const example = item.example ? `<div class="example-text">${item.example}</div>` : '';
                    return `<li>${star}${item.step}${example}</li>`;
                }
            }).join('');
        }

        function setView(view) {
            document.body.className = `view-${view}`;
            
            // Update toggle buttons
            document.querySelectorAll('.toggle-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function applyFilters() {
            renderCards();
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            renderCards();
        });

        async function exportCards(type) {
            const loadingOverlay = document.getElementById('loadingOverlay');
            loadingOverlay.style.display = 'flex';
            
            try {
                if (type === 'summary' || type === 'both') {
                    await exportSummaryCards();
                }
                
                if (type === 'detail' || type === 'both') {
                    await exportDetailCards();
                }
                
                if (type === 'both') {
                    alert('Both summary and detail cards have been exported successfully!');
                }
            } catch (error) {
                console.error('Export error:', error);
                alert('There was an error during export. Please try again.');
            } finally {
                loadingOverlay.style.display = 'none';
            }
        }

        async function exportSummaryCards() {
            const summaryWrappers = document.querySelectorAll('.summary-card-wrapper:not(.card-hidden)');
            
            for (let i = 0; i < summaryWrappers.length; i++) {
                const wrapper = summaryWrappers[i];
                const card = wrapper.querySelector('.summary-card');
                const cardId = card.getAttribute('data-card-id');
                
                await html2canvas(card, {
                    scale: 2,
                    backgroundColor: '#ffffff'
                }).then(canvas => {
                    const link = document.createElement('a');
                    link.download = `${cardId}-summary.png`;
                    link.href = canvas.toDataURL();
                    link.click();
                });
                
                // Small delay between exports
                await new Promise(resolve => setTimeout(resolve, 500));
            }
        }

        async function exportDetailCards() {
            const detailCards = document.querySelectorAll('.detail-card-wrapper:not(.card-hidden) .detail-card');
            
            for (let i = 0; i < detailCards.length; i++) {
                const card = detailCards[i];
                const cardId = card.getAttribute('data-card-id');
                
                await html2canvas(card, {
                    scale: 2,
                    backgroundColor: '#ffffff'
                }).then(canvas => {
                    const link = document.createElement('a');
                    link.download = `${cardId}-detail.png`;
                    link.href = canvas.toDataURL();
                    link.click();
                });
                
                // Small delay between exports
                await new Promise(resolve => setTimeout(resolve, 500));
            }
        }

        async function exportSingleCard(cardId, type) {
            const loadingOverlay = document.getElementById('loadingOverlay');
            loadingOverlay.style.display = 'flex';
            
            try {
                const selector = type === 'summary' ? 
                    `.summary-card[data-card-id="${cardId}"]` : 
                    `.detail-card[data-card-id="${cardId}"]`;
                
                const cardElement = document.querySelector(selector);
                
                if (cardElement) {
                    await html2canvas(cardElement, {
                        scale: 2,
                        backgroundColor: '#ffffff'
                    }).then(canvas => {
                        const link = document.createElement('a');
                        link.download = `${cardId}-${type}.png`;
                        link.href = canvas.toDataURL();
                        link.click();
                    });
                }
            } catch (error) {
                console.error('Export error:', error);
                alert('There was an error during export. Please try again.');
            } finally {
                loadingOverlay.style.display = 'none';
            }
        }
    </script>
</body>
</html>